//================== SysCAD - Copyright Kenwalt (Pty) Ltd ===================
// $Nokeywords: $
//===========================================================================
/* -3 */
/********************************** C3SN.C **********************************/
/********************************* Splines *********************************/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
#ifdef  SPLINE
#include <c3sdefs.h>
#include <c3hdefs.h>
#include <c3vdefs.h>
#include <c3vpriv.h>
#include <c3hmcrs.h>

/*-------------------------------------------------------------------------*/
BBS_PRIVATE C3_PLANE_STATUS c3s_plane ( a, n, normal, dist_ptr ) 
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
HPT3* a ;
INT n ;
PT3 normal ;
REAL *dist_ptr ;
{
    INT deg=0 ;
    PT3 p[2] ;

    c3s_plane_def ( a, n, normal, dist_ptr, p, &deg ) ;
    if ( deg < 3 ) 
        RETURN ( C3_PLANE_UNDER_DET ) ;
    else if ( deg > 3 ) 
        RETURN ( C3_PLANE_OVER_DET ) ;
    else
        RETURN ( C3_PLANE_DET ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PRIVATE BOOLEAN c3s_on_plane ( a, n, normal, dist ) 
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
HPT3* a ;
INT n ;
PT3 normal ;
REAL dist ;
{
    INT i ;

    for ( i=0 ; i<n ; i++ ) {
        if ( !c3h_on_plane ( a[i], normal, dist ) ) 
            RETURN ( FALSE ) ;
    }
    RETURN ( TRUE ) ;
}


/*----------------------------------------------------------------------*/
BBS_PRIVATE void c3s_plane_def ( a, n, normal, dist_ptr, p, deg_ptr ) 
/*----------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                      !!!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software!!!!!!!*/
/*!!!!!!!!                   All rights reserved                !!!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
HPT3* a ;
INT n ;
PT3 normal ;
REAL *dist_ptr ;
PT3 p[2] ;
INT *deg_ptr ;
{
    INT i ;
    PT3 b ;

    for ( i=0 ; i<n && *deg_ptr <= 3 ; i++ ) {
        c3h_hpt_pt ( a[i], b ) ;
        c3v_plane_def ( b, p, normal, dist_ptr, deg_ptr ) ;
    }
}
#endif  /*SPLINE*/


