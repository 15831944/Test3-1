//================== SysCAD - Copyright Kenwalt (Pty) Ltd ===================
// $Nokeywords: $
//===========================================================================
/* -2 -3 */
/******************************** GRR.S ************************************/
/**************************** Graphic routines *****************************/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/

#include <grldefs.h>
#include <grrdefs.h>

EXTERN  HDC   win_HDC;
EXTERN  BOOLEAN win_printing;

extern FILE *dbgf;

#define X_MAX           ((REAL)grl_get_max_x()-1.0)
#define Y_MAX           ((REAL)grl_get_max_y()-1.0)
#define X_TO_PIX(x)     ((GR_PIX_COORD)(X_MAX*x + GR_INT_ROUNDOFF))
#define Y_TO_PIX(y)     ((GR_PIX_COORD)(Y_MAX*y + GR_INT_ROUNDOFF))

GLOBAL  REAL    GR_SELECT_WIDTH = 0.01 ;

/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_set_textposition ( c )
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
REAL c[2] ;
{
    GR_PIX_COORD x, y ;
    x = grl_get_numtextcols () ;
    y = grl_get_numtextrows () ;
    x = (INT) ( (REAL) ( x - 1 ) * c[0] + 0.5 ) + 1 ;
    y = (INT) ( (REAL) ( y - 1 ) * c[1] + 0.5 ) + 1 ;
    grl_set_textposition ( x, y ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_init_textposition __(( void ))
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
{
    grl_set_textposition ( 0, 0 ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC INT* grr_point_to_pixel ( pt, pxl )
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
REAL pt[2] ;
INT pxl[2] ;
{

    pxl[0] = X_TO_PIX(pt[0]) ;
    pxl[1] = Y_TO_PIX(pt[1]) ;
    RETURN ( pxl ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC REAL* grr_pixel_to_point ( pxl, pt )
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
INT pxl[2] ;
REAL pt[2] ;
{
    pt[0] = (REAL)pxl[0] / grl_get_max_x() ;
    pt[1] = (REAL)pxl[1] / grl_get_max_y() ;
    RETURN ( pt ) ;
}

/*-------------------------------------------------------------------------*/
BBS_PUBLIC REAL* grr_pixel_to_point_real ( pxl, pt )
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
REAL pxl[2] ;
REAL pt[2] ;
{
    pt[0] = pxl[0] / grl_get_max_x() ;
    pt[1] = pxl[1] / grl_get_max_y() ;
    RETURN ( pt ) ;
}



/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_moveto ( a )
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
REAL a[2] ;
{
    REAL xmax = grl_get_max_x() - 1.0;
    REAL ymax = grl_get_max_y() - 1.0;
    REAL xcrd = xmax*a[0];
    REAL ycrd = ymax*a[1];
    mhm_moveto(xcrd,ycrd);

    //grl_moveto ( X_TO_PIX(a[0]), Y_TO_PIX(a[1]) ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_lineto ( a )
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
REAL a[2] ;
{
    REAL xmax = grl_get_max_x() - 1.0;
    REAL ymax = grl_get_max_y() - 1.0;
    REAL xcrd = xmax*a[0];
    REAL ycrd = ymax*a[1];
    mhm_lineto(xcrd,ycrd);

    //grl_lineto ( X_TO_PIX(a[0]), Y_TO_PIX(a[1]) ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_line ( a0, a1 )
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
REAL a0[2], a1[2] ;
{
    grr_moveto ( a0 ) ;
    grr_lineto ( a1 ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_box ( a0, a1 )
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
REAL a0[2], a1[2] ;
{
    grl_rectangle ( X_TO_PIX(a0[0]), Y_TO_PIX(a0[1]), 
        X_TO_PIX(a1[0]), Y_TO_PIX(a1[1]) ) ;
}

/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_fill_box ( a0, a1 )
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
REAL a0[2], a1[2] ;
{
    grl_fill_rectangle ( X_TO_PIX(a0[0]), Y_TO_PIX(a0[1]), 
        X_TO_PIX(a1[0]), Y_TO_PIX(a1[1]) ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_point ( c, s )
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
REAL c[2], s ;
{
    REAL a[2], b[2] ;
    s *= 0.5 ;
    a[0] = c[0] - s ;
    b[0] = c[0] + s ;
    a[1] = b[1] = c[1] ;
    grr_line ( a, b ) ;
    s *= grl_get_screen_ratio () ;
    a[0] = b[0] = c[0] ;
    a[1] = c[1] - s ;
    b[1] = c[1] + s ;
    grr_line ( a, b ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_arrow ( c, dir, a, b, h )
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/* arrow starts at c in the direction dir, norm(dir) = 1, and distance a.  */
REAL c[2], dir[2], a, b, h ;
{
    REAL p[2], q[2], u[2], v[2] ;

    p[0] = c[0] + dir[0] * a ;
    p[1] = c[1] + dir[1] * a ;
    grr_line ( c, p ) ;

    q[0] = c[0] + dir[0] * ( a - h ) ;
    q[1] = c[1] + dir[1] * ( a - h ) ;
    u[0] = b * dir[1] ;
    u[1] = - b * dir[0] ;

    v[0] = q[0] + u[0] ;
    v[1] = q[1] + u[1] ;
    grr_line ( v, p ) ;

    v[0] = q[0] - u[0] ;
    v[1] = q[1] - u[1] ;
    grr_line ( v, p ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_clip ( a0, a1 )
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
REAL a0[2], a1[2] ;
{
    grl_clip ( X_TO_PIX(a0[0]), Y_TO_PIX(a0[1]), 
        X_TO_PIX(a1[0]), Y_TO_PIX(a1[1]) ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_clip_inside ( a0, a1 )
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
REAL a0[2], a1[2] ;
{
    grl_clip ( (GR_PIX_COORD)(X_TO_PIX(a0[0])+1), (GR_PIX_COORD)(Y_TO_PIX(a0[1])+1), 
        (GR_PIX_COORD)(X_TO_PIX(a1[0])-1), (GR_PIX_COORD)(Y_TO_PIX(a1[1])-1) ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC REAL grr_get_max_x __(( void ))
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
{
    RETURN ( (REAL)grl_get_max_x() ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC REAL grr_get_max_y __(( void ))
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
{
    RETURN ( (REAL)grl_get_max_y() ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC BOOLEAN grr_init ( gmode, screen_color, full ) /* cnm */
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
int gmode ;
GR_COLOR screen_color ;
int full ;
{
    if ( gmode == (int)GR_NOVMODE ) {
        grl_set_solid_patt () ;
        grl_set_color ( screen_color, 0 ) ;
        //grl_set_thickness ( 0 ) ; temp
        RETURN ( TRUE ) ;
    }

    if ( !grl_set_videomode ( gmode ) )
        RETURN ( FALSE ) ;
    if (!full) /* cnm */
        RETURN ( TRUE ) ;
    grl_clear_screen() ;
    grl_set_solid_patt () ;
    grl_set_color ( screen_color, 0 ) ;
    grl_fill_rectangle ( 0, 0, grl_get_max_x(), grl_get_max_y() ) ;
    RETURN ( TRUE ) ;
}

/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_context (hdc)  /*cnm*/
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
HDC hdc;
{
    win_HDC = hdc;
    grl_set_color(-1, 0);
    //grl_set_thickness ( 0 ) ; temp
}

/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_printing (printing)  /*kga 22/1/99*/
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
BOOLEAN printing;
{
    win_printing = printing;
}

/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_exit __(( void )) 
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
{
    grl_clear_screen() ;
    grl_exit_videomode() ; 
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC REAL grr_get_screen_ratio __(( void ))
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
{
    RETURN ( grl_get_screen_ratio () ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_set_screen_ratio ( screen_ratio )
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
REAL screen_ratio ;
{
    grl_set_screen_ratio ( screen_ratio ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_set_color ( color )
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
GR_COLOR color ;
{
    grl_set_color ( color, 0 ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_set_thickness ( thickness )
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
REAL thickness ;
{
    grl_set_thickness ( thickness ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC GR_COLOR grr_get_color __(( void ))
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
{
    RETURN ( grl_get_color() ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_set_patt ( patt )
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
GR_PATT patt ;
{
    grl_set_patt ( patt ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_set_solid_patt __(( void ))
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
{
    grl_set_solid_patt () ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC GR_PATT grr_get_patt __(( void ))
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
{
    RETURN ( grl_get_patt () ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_clear_screen (screen_color)
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
GR_COLOR screen_color ;
{
    GR_COLOR prev_color = grl_get_color ();
    grl_clear_screen () ;
    grl_set_color ( screen_color, 0 ) ;
    //grl_set_thickness ( 0 ) ; temp
    grl_fill_rectangle ( 0, 0, grl_get_max_x(), grl_get_max_y() ) ;
    grl_set_color ( prev_color, 0 ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_putimage ( x, y, buffer )
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
REAL x, y ;
ANY buffer ;
{
    grl_putimage ( X_TO_PIX(x), Y_TO_PIX(y), buffer ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC ANY grr_getimage ( x0, y0, x1, y1 )
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!!                                                          !!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
REAL x0, y0, x1, y1 ;
{
    RETURN ( grl_getimage ( X_TO_PIX(x0), Y_TO_PIX(y0), 
        X_TO_PIX(x1), Y_TO_PIX(y1) ) ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC REAL grr_get_select_width ()
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
{
    RETURN ( GR_SELECT_WIDTH ) ;
}


/*-------------------------------------------------------------------------*/
BBS_PUBLIC void grr_set_select_width ( select_width )
/*-------------------------------------------------------------------------*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
/*!!!!!!!! (C) Copyright 1989, 1990, 1991 Building Block Software   !!!!!!!*/
/*!!!!!!!!                    All rights reserved                   !!!!!!!*/
/*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
REAL select_width ;
{
    GR_SELECT_WIDTH = select_width ;
}


